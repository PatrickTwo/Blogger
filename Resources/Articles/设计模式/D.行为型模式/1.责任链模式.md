**笔记：责任链模式（Chain of Responsibility Pattern）**  

- **定义**  
  允许请求沿处理者链依次传递，每个处理者可处理请求或将请求交给下一个处理者。也叫职责链模式、命令链模式。  

- **核心思想**  
  将复杂请求拆分成多个独立处理步骤，形成链式结构，按顺序流式处理，发送者无需知道具体处理者。  

- **游戏场景：任务提交验证**  
  1. **任务请求类**：含玩家等级、是否拥有必需品、前置任务完成状态、错误信息字段。  
  2. **抽象处理者接口**：定义 `HandleRequest(request)`，及设置下一节点的固定方法（含保护字段保存下一个处理者）。  
  3. **具体处理者**：  
     - **等级验证器**：比对玩家等级与要求，不达标设错误信息并终止链；达标则调用下一节点。  
     - **道具验证器**：检查必需品字段，失败设错误信息并返回；成功则调用下一节点。  
     - **前置任务验证器**：作为链尾，验证后不再调用下一节点。  
  4. **客户端**：构造各处理者对象 → 用 `SetNext` 构建链 → 发请求给首节点 → 根据 `ErrorMessage` 判断是否成功。  

- **关键要素**  
  1. **请求对象**：封装待处理数据与结果信息。  
  2. **抽象处理者**：定义统一处理接口与设置下一节点方法。  
  3. **具体处理者**：实现各自校验逻辑，可决定是否终止链或传递。  
  4. 链节点可自由增删（顺序有时需保证），动态组合处理逻辑。  

- **优点**  
  - 请求发送者与处理者解耦。  
  - 符合开闭原则，新增处理者不影响现有代码。  
  - 灵活应对多步骤判断。  

- **注意点**  
  - 需处理请求未被任何节点处理的默认逻辑（类似 switch 的 default）。  

- **典型应用场景**  
  1. **伤害处理**：护甲检定 → 元素抗性 → 装备/道具/被动技能等多阶段处理。  
  2. **技能释放条件判断**。  
  3. **成就系统解锁条件检查**：配合观察者模式触发条件，责任链验证全部条件是否满足。  
  4. **NPC 对话/行动分支选择**：按玩家任务状态、道具、等级等逐步筛选，确定最终呈现内容。