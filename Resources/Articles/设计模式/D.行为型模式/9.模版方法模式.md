**笔记：模板方法模式（Template Method Pattern）**  

- **定义**  
  父类决定算法的整体框架（固定流程步骤），允许子类在不改变结构的前提下重写算法的特定步骤。通过继承实现**静态绑定**，是多态在流程行为上的体现。  

- **核心思想**  
  将固定流程抽象到父类，把可变步骤延迟到子类实现，实现“流程统一、细节各异”。  

- **类比说明**  
  类似**策略模式**（用组合动态分配策略），但模板方法用**继承**实现，流程在编译期确定。  

- **示例场景：做菜流程**  
  1. **固定流程**：准备食材 → 烹饪 → 上菜（三步骤为算法骨架）。  
  2. **抽象父类 `CookTemplate`**  
     - 定义模板方法 `CookMeal()`：按顺序调用 `PrepareIngredients()` → `CookDish()` → `Serve()`。  
     - `PrepareIngredients()` 与 `CookDish()` 为抽象方法，由子类实现。  
     - `Serve()` 可为具体实现（公共步骤）。  
  3. **具体子类**  
     - `Breakfast`：准备鸡蛋、面包、果汁；烹饪西式早餐。  
     - `Dinner`：准备鸡肉、配菜、米饭；烹饪晚餐菜品。  
  4. **客户端**  
     - 实例化子类对象 → 调用 `CookMeal()` → 自动执行完整流程并使用子类自定义逻辑。  

- **构成要素**  
  1. **父类（抽象类）**：定义算法骨架（模板方法）与抽象步骤方法。  
  2. **子类**：实现父类中的抽象步骤方法，完成具体业务逻辑。  

- **优点**  
  1. **结构清晰简单**：流程控制集中在父类，子类只关注步骤细节。  
  2. **易维护**：流程固定减少人为失误，调试时可单独定位子类重写逻辑。  
  3. **符合开闭原则**：新增流程变体只需新增子类，不修改父类结构。  

- **缺点**  
  1. **灵活性不如策略模式**：继承为静态绑定，运行时无法更换步骤实现。  
  2. **可能导致深层继承**：为灵活定制需多层继承，增加维护难度。  

- **游戏开发应用场景**  
  1. **AI 行为流程**：固定流程为“选择目标 → 评估环境 → 决策 → 执行行为”，不同类型 AI 重写各阶段逻辑。  
  2. **关卡/地图生成**：固定生成流程，根据设置生成不同资源或地貌（如《我的世界》《饥荒》沙盒地图）。  
  3. **战斗结算流程**：固定伤害计算流程（基础伤害 → 抗性计算 → 穿甲计算 → 最终伤害），不同战斗类型可重写细节。  

- **小结**  
  模板方法模式通过继承固化算法骨架，利用多态实现步骤定制，适合流程稳定、步骤可变的场景，能显著提升代码复用性与结构清晰度。